{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/hot2content-init/src/lib/blog.ts"],"sourcesContent":["import fs from 'fs'\nimport path from 'path'\nimport matter from 'gray-matter'\nimport { remark } from 'remark'\nimport html from 'remark-html'\nimport gfm from 'remark-gfm'\n\nconst OUTPUT_DIR = path.join(process.cwd(), 'output')\n\nexport interface BlogPost {\n  slug: string\n  title: string\n  description: string\n  keywords: string[]\n  date: string\n  content: string\n  contentHtml: string\n}\n\n/**\n * Parse markdown frontmatter and content\n */\nasync function parseMarkdown(content: string): Promise<{\n  data: Record<string, any>\n  contentHtml: string\n}> {\n  const { data, content: markdownContent } = matter(content)\n  \n  const processedContent = await remark()\n    .use(gfm)\n    .use(html, { sanitize: false })\n    .process(markdownContent)\n  \n  return {\n    data,\n    contentHtml: processedContent.toString()\n  }\n}\n\n/**\n * Get all blog posts for a language\n */\nexport async function getBlogPosts(lang: 'en' | 'zh'): Promise<BlogPost[]> {\n  const filename = lang === 'en' ? 'blog-en.md' : 'blog-zh.md'\n  const filePath = path.join(OUTPUT_DIR, filename)\n  \n  // Also check for versioned files (e.g., blog-en-v2.md)\n  const v2Path = path.join(OUTPUT_DIR, filename.replace('.md', '-v2.md'))\n  \n  const posts: BlogPost[] = []\n  \n  // Try v2 first, then regular\n  for (const fp of [v2Path, filePath]) {\n    if (fs.existsSync(fp)) {\n      try {\n        const content = fs.readFileSync(fp, 'utf-8')\n        const { data, contentHtml } = await parseMarkdown(content)\n        \n        posts.push({\n          slug: data.slug || 'untitled',\n          title: data.title || 'Untitled',\n          description: data.description || '',\n          keywords: data.keywords || [],\n          date: typeof data.date === 'string' ? data.date : new Date(data.date).toISOString().split('T')[0],\n          content,\n          contentHtml\n        })\n        break // Only take the first found file\n      } catch (error) {\n        console.error(`Error parsing ${fp}:`, error)\n      }\n    }\n  }\n  \n  return posts\n}\n\n/**\n * Get a single blog post by slug\n */\nexport async function getBlogPost(lang: 'en' | 'zh', slug: string): Promise<BlogPost | null> {\n  const posts = await getBlogPosts(lang)\n  return posts.find(p => p.slug === slug) || null\n}\n\n/**\n * Get narrative data for a topic\n */\nexport async function getNarrative(): Promise<Record<string, any> | null> {\n  const narrativePath = path.join(OUTPUT_DIR, 'core-narrative.json')\n  \n  if (!fs.existsSync(narrativePath)) return null\n  \n  try {\n    return JSON.parse(fs.readFileSync(narrativePath, 'utf-8'))\n  } catch {\n    return null\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEA,MAAM,aAAa,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAY5C;;CAEC,GACD,eAAe,cAAc,OAAe;IAI1C,MAAM,EAAE,IAAI,EAAE,SAAS,eAAe,EAAE,GAAG,IAAA,kJAAM,EAAC;IAElD,MAAM,mBAAmB,MAAM,IAAA,yIAAM,IAClC,GAAG,CAAC,wJAAG,EACP,GAAG,CAAC,yJAAI,EAAE;QAAE,UAAU;IAAM,GAC5B,OAAO,CAAC;IAEX,OAAO;QACL;QACA,aAAa,iBAAiB,QAAQ;IACxC;AACF;AAKO,eAAe,aAAa,IAAiB;IAClD,MAAM,WAAW,SAAS,OAAO,eAAe;IAChD,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,YAAY;IAEvC,uDAAuD;IACvD,MAAM,SAAS,4GAAI,CAAC,IAAI,CAAC,YAAY,SAAS,OAAO,CAAC,OAAO;IAE7D,MAAM,QAAoB,EAAE;IAE5B,6BAA6B;IAC7B,KAAK,MAAM,MAAM;QAAC;QAAQ;KAAS,CAAE;QACnC,IAAI,wGAAE,CAAC,UAAU,CAAC,KAAK;YACrB,IAAI;gBACF,MAAM,UAAU,wGAAE,CAAC,YAAY,CAAC,IAAI;gBACpC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,MAAM,cAAc;gBAElD,MAAM,IAAI,CAAC;oBACT,MAAM,KAAK,IAAI,IAAI;oBACnB,OAAO,KAAK,KAAK,IAAI;oBACrB,aAAa,KAAK,WAAW,IAAI;oBACjC,UAAU,KAAK,QAAQ,IAAI,EAAE;oBAC7B,MAAM,OAAO,KAAK,IAAI,KAAK,WAAW,KAAK,IAAI,GAAG,IAAI,KAAK,KAAK,IAAI,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;oBACjG;oBACA;gBACF;gBACA,OAAM,iCAAiC;YACzC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,EAAE;YACxC;QACF;IACF;IAEA,OAAO;AACT;AAKO,eAAe,YAAY,IAAiB,EAAE,IAAY;IAC/D,MAAM,QAAQ,MAAM,aAAa;IACjC,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,SAAS;AAC7C;AAKO,eAAe;IACpB,MAAM,gBAAgB,4GAAI,CAAC,IAAI,CAAC,YAAY;IAE5C,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,gBAAgB,OAAO;IAE1C,IAAI;QACF,OAAO,KAAK,KAAK,CAAC,wGAAE,CAAC,YAAY,CAAC,eAAe;IACnD,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/hot2content-init/src/app/en/blog/%5Bslug%5D/page.tsx"],"sourcesContent":["import { notFound } from 'next/navigation'\nimport Link from 'next/link'\nimport { getBlogPost, getBlogPosts } from '@/lib/blog'\nimport type { Metadata } from 'next'\n\ninterface Props {\n  params: Promise<{ slug: string }>\n}\n\nexport async function generateStaticParams() {\n  const posts = await getBlogPosts('en')\n  return posts.map((post) => ({ slug: post.slug }))\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const { slug } = await params\n  const post = await getBlogPost('en', slug)\n  \n  if (!post) return { title: 'Not Found' }\n  \n  return {\n    title: `${post.title} | Lore`,\n    description: post.description,\n    keywords: post.keywords,\n    alternates: {\n      languages: {\n        'zh': `/zh/blog/${slug}`,\n      },\n    },\n    openGraph: {\n      title: post.title,\n      description: post.description,\n      type: 'article',\n      publishedTime: post.date,\n    },\n  }\n}\n\nexport default async function BlogPost({ params }: Props) {\n  const { slug } = await params\n  const post = await getBlogPost('en', slug)\n  \n  if (!post) notFound()\n  \n  return (\n    <main className=\"min-h-screen px-8 py-12 max-w-2xl mx-auto\">\n      {/* Header */}\n      <header className=\"flex items-center justify-between mb-12 fade-in\">\n        <Link href=\"/\" className=\"text-2xl tracking-tight hover:opacity-60 transition-opacity\">\n          Lore\n        </Link>\n        <nav className=\"flex gap-4 text-sm\">\n          <Link href=\"/\" className=\"text-foreground\">EN</Link>\n          <span className=\"text-muted\">/</span>\n          <Link href={`/zh/blog/${slug}`} className=\"text-muted hover:text-foreground transition-colors\">中文</Link>\n        </nav>\n      </header>\n\n      {/* Article */}\n      <article className=\"fade-in-delay-1\">\n        <header className=\"mb-8\">\n          <time className=\"badge block mb-4\">{post.date}</time>\n        </header>\n        \n        <div \n          className=\"article-content\"\n          dangerouslySetInnerHTML={{ __html: post.contentHtml }} \n        />\n      </article>\n\n      {/* Footer */}\n      <footer className=\"mt-16 pt-8 border-t border-subtle\">\n        <Link href=\"/\" className=\"text-muted text-sm hover:text-foreground transition-colors\">\n          ← Back to all posts\n        </Link>\n      </footer>\n    </main>\n  )\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAAA;AACA;AACA;;;;;AAOO,eAAe;IACpB,MAAM,QAAQ,MAAM,IAAA,kIAAY,EAAC;IACjC,OAAO,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;YAAE,MAAM,KAAK,IAAI;QAAC,CAAC;AACjD;AAEO,eAAe,iBAAiB,EAAE,MAAM,EAAS;IACtD,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IACvB,MAAM,OAAO,MAAM,IAAA,iIAAW,EAAC,MAAM;IAErC,IAAI,CAAC,MAAM,OAAO;QAAE,OAAO;IAAY;IAEvC,OAAO;QACL,OAAO,GAAG,KAAK,KAAK,CAAC,OAAO,CAAC;QAC7B,aAAa,KAAK,WAAW;QAC7B,UAAU,KAAK,QAAQ;QACvB,YAAY;YACV,WAAW;gBACT,MAAM,CAAC,SAAS,EAAE,MAAM;YAC1B;QACF;QACA,WAAW;YACT,OAAO,KAAK,KAAK;YACjB,aAAa,KAAK,WAAW;YAC7B,MAAM;YACN,eAAe,KAAK,IAAI;QAC1B;IACF;AACF;AAEe,eAAe,SAAS,EAAE,MAAM,EAAS;IACtD,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IACvB,MAAM,OAAO,MAAM,IAAA,iIAAW,EAAC,MAAM;IAErC,IAAI,CAAC,MAAM,IAAA,iMAAQ;IAEnB,qBACE,8OAAC;QAAK,WAAU;;0BAEd,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC,0LAAI;wBAAC,MAAK;wBAAI,WAAU;kCAA8D;;;;;;kCAGvF,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,0LAAI;gCAAC,MAAK;gCAAI,WAAU;0CAAkB;;;;;;0CAC3C,8OAAC;gCAAK,WAAU;0CAAa;;;;;;0CAC7B,8OAAC,0LAAI;gCAAC,MAAM,CAAC,SAAS,EAAE,MAAM;gCAAE,WAAU;0CAAqD;;;;;;;;;;;;;;;;;;0BAKnG,8OAAC;gBAAQ,WAAU;;kCACjB,8OAAC;wBAAO,WAAU;kCAChB,cAAA,8OAAC;4BAAK,WAAU;sCAAoB,KAAK,IAAI;;;;;;;;;;;kCAG/C,8OAAC;wBACC,WAAU;wBACV,yBAAyB;4BAAE,QAAQ,KAAK,WAAW;wBAAC;;;;;;;;;;;;0BAKxD,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC,0LAAI;oBAAC,MAAK;oBAAI,WAAU;8BAA6D;;;;;;;;;;;;;;;;;AAM9F"}}]
}