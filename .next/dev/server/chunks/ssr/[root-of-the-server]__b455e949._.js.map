{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/hot2content-init/src/lib/blog.ts"],"sourcesContent":["import fs from 'fs'\nimport path from 'path'\nimport matter from 'gray-matter'\nimport { remark } from 'remark'\nimport html from 'remark-html'\nimport gfm from 'remark-gfm'\n\nconst OUTPUT_DIR = path.join(process.cwd(), 'output')\n\nexport interface BlogPost {\n  slug: string\n  title: string\n  description: string\n  keywords: string[]\n  date: string\n  content: string\n  contentHtml: string\n}\n\n/**\n * Parse markdown frontmatter and content\n */\nasync function parseMarkdown(content: string): Promise<{\n  data: Record<string, any>\n  contentHtml: string\n}> {\n  const { data, content: markdownContent } = matter(content)\n  \n  const processedContent = await remark()\n    .use(gfm)\n    .use(html, { sanitize: false })\n    .process(markdownContent)\n  \n  return {\n    data,\n    contentHtml: processedContent.toString()\n  }\n}\n\n/**\n * Get all blog posts for a language\n */\nexport async function getBlogPosts(lang: 'en' | 'zh'): Promise<BlogPost[]> {\n  const filename = lang === 'en' ? 'blog-en.md' : 'blog-zh.md'\n  const filePath = path.join(OUTPUT_DIR, filename)\n  \n  // Also check for versioned files (e.g., blog-en-v2.md)\n  const v2Path = path.join(OUTPUT_DIR, filename.replace('.md', '-v2.md'))\n  \n  const posts: BlogPost[] = []\n  \n  // Try v2 first, then regular\n  for (const fp of [v2Path, filePath]) {\n    if (fs.existsSync(fp)) {\n      try {\n        const content = fs.readFileSync(fp, 'utf-8')\n        const { data, contentHtml } = await parseMarkdown(content)\n        \n        posts.push({\n          slug: data.slug || 'untitled',\n          title: data.title || 'Untitled',\n          description: data.description || '',\n          keywords: data.keywords || [],\n          date: typeof data.date === 'string' ? data.date : new Date(data.date).toISOString().split('T')[0],\n          content,\n          contentHtml\n        })\n        break // Only take the first found file\n      } catch (error) {\n        console.error(`Error parsing ${fp}:`, error)\n      }\n    }\n  }\n  \n  return posts\n}\n\n/**\n * Get a single blog post by slug\n */\nexport async function getBlogPost(lang: 'en' | 'zh', slug: string): Promise<BlogPost | null> {\n  const posts = await getBlogPosts(lang)\n  return posts.find(p => p.slug === slug) || null\n}\n\n/**\n * Get narrative data for a topic\n */\nexport async function getNarrative(): Promise<Record<string, any> | null> {\n  const narrativePath = path.join(OUTPUT_DIR, 'core-narrative.json')\n  \n  if (!fs.existsSync(narrativePath)) return null\n  \n  try {\n    return JSON.parse(fs.readFileSync(narrativePath, 'utf-8'))\n  } catch {\n    return null\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEA,MAAM,aAAa,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAY5C;;CAEC,GACD,eAAe,cAAc,OAAe;IAI1C,MAAM,EAAE,IAAI,EAAE,SAAS,eAAe,EAAE,GAAG,IAAA,kJAAM,EAAC;IAElD,MAAM,mBAAmB,MAAM,IAAA,yIAAM,IAClC,GAAG,CAAC,wJAAG,EACP,GAAG,CAAC,yJAAI,EAAE;QAAE,UAAU;IAAM,GAC5B,OAAO,CAAC;IAEX,OAAO;QACL;QACA,aAAa,iBAAiB,QAAQ;IACxC;AACF;AAKO,eAAe,aAAa,IAAiB;IAClD,MAAM,WAAW,SAAS,OAAO,eAAe;IAChD,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,YAAY;IAEvC,uDAAuD;IACvD,MAAM,SAAS,4GAAI,CAAC,IAAI,CAAC,YAAY,SAAS,OAAO,CAAC,OAAO;IAE7D,MAAM,QAAoB,EAAE;IAE5B,6BAA6B;IAC7B,KAAK,MAAM,MAAM;QAAC;QAAQ;KAAS,CAAE;QACnC,IAAI,wGAAE,CAAC,UAAU,CAAC,KAAK;YACrB,IAAI;gBACF,MAAM,UAAU,wGAAE,CAAC,YAAY,CAAC,IAAI;gBACpC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,MAAM,cAAc;gBAElD,MAAM,IAAI,CAAC;oBACT,MAAM,KAAK,IAAI,IAAI;oBACnB,OAAO,KAAK,KAAK,IAAI;oBACrB,aAAa,KAAK,WAAW,IAAI;oBACjC,UAAU,KAAK,QAAQ,IAAI,EAAE;oBAC7B,MAAM,OAAO,KAAK,IAAI,KAAK,WAAW,KAAK,IAAI,GAAG,IAAI,KAAK,KAAK,IAAI,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;oBACjG;oBACA;gBACF;gBACA,OAAM,iCAAiC;YACzC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,EAAE;YACxC;QACF;IACF;IAEA,OAAO;AACT;AAKO,eAAe,YAAY,IAAiB,EAAE,IAAY;IAC/D,MAAM,QAAQ,MAAM,aAAa;IACjC,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,SAAS;AAC7C;AAKO,eAAe;IACpB,MAAM,gBAAgB,4GAAI,CAAC,IAAI,CAAC,YAAY;IAE5C,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,gBAAgB,OAAO;IAE1C,IAAI;QACF,OAAO,KAAK,KAAK,CAAC,wGAAE,CAAC,YAAY,CAAC,eAAe;IACnD,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/hot2content-init/src/app/page.tsx"],"sourcesContent":["import Link from 'next/link'\nimport { getBlogPosts } from '@/lib/blog'\n\nexport default async function Home() {\n  const posts = await getBlogPosts('en')\n  \n  return (\n    <main className=\"min-h-screen px-8 py-12 max-w-2xl mx-auto\">\n      {/* Header */}\n      <header className=\"flex items-center justify-between mb-16 fade-in\">\n        <div>\n          <h1 className=\"text-2xl tracking-tight\">Lore</h1>\n        </div>\n        \n        {/* Language Switcher */}\n        <nav className=\"flex gap-4 text-sm\">\n          <Link href=\"/\" className=\"text-foreground\">EN</Link>\n          <span className=\"text-muted\">/</span>\n          <Link href=\"/zh\" className=\"text-muted hover:text-foreground transition-colors\">中文</Link>\n        </nav>\n      </header>\n\n      {/* Divider */}\n      <div className=\"divider fade-in-delay-1 mb-12\"></div>\n      \n      {/* Posts */}\n      {posts.length === 0 ? (\n        <p className=\"text-muted fade-in-delay-2\">\n          No posts yet.\n        </p>\n      ) : (\n        <ul className=\"space-y-10 fade-in-delay-2\">\n          {posts.map((post) => (\n            <li key={post.slug}>\n              <Link \n                href={`/en/blog/${post.slug}`}\n                className=\"card-minimal block\"\n              >\n                <time className=\"badge block mb-3\">{post.date}</time>\n                <h2 className=\"text-xl mb-2\">{post.title}</h2>\n                <p className=\"text-muted text-sm leading-relaxed\">\n                  {post.description}\n                </p>\n              </Link>\n            </li>\n          ))}\n        </ul>\n      )}\n\n      {/* Footer */}\n      <footer className=\"mt-24 pt-8 border-t border-subtle\">\n        <p className=\"text-muted text-xs\">\n          AI-powered research & content\n        </p>\n      </footer>\n    </main>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,eAAe;IAC5B,MAAM,QAAQ,MAAM,IAAA,kIAAY,EAAC;IAEjC,qBACE,8OAAC;QAAK,WAAU;;0BAEd,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;kCACC,cAAA,8OAAC;4BAAG,WAAU;sCAA0B;;;;;;;;;;;kCAI1C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,0LAAI;gCAAC,MAAK;gCAAI,WAAU;0CAAkB;;;;;;0CAC3C,8OAAC;gCAAK,WAAU;0CAAa;;;;;;0CAC7B,8OAAC,0LAAI;gCAAC,MAAK;gCAAM,WAAU;0CAAqD;;;;;;;;;;;;;;;;;;0BAKpF,8OAAC;gBAAI,WAAU;;;;;;YAGd,MAAM,MAAM,KAAK,kBAChB,8OAAC;gBAAE,WAAU;0BAA6B;;;;;qCAI1C,8OAAC;gBAAG,WAAU;0BACX,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;kCACC,cAAA,8OAAC,0LAAI;4BACH,MAAM,CAAC,SAAS,EAAE,KAAK,IAAI,EAAE;4BAC7B,WAAU;;8CAEV,8OAAC;oCAAK,WAAU;8CAAoB,KAAK,IAAI;;;;;;8CAC7C,8OAAC;oCAAG,WAAU;8CAAgB,KAAK,KAAK;;;;;;8CACxC,8OAAC;oCAAE,WAAU;8CACV,KAAK,WAAW;;;;;;;;;;;;uBARd,KAAK,IAAI;;;;;;;;;;0BAiBxB,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAE,WAAU;8BAAqB;;;;;;;;;;;;;;;;;AAM1C"}}]
}